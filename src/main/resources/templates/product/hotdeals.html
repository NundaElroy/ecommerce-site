<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>

<th:block th:replace="user/userfragments :: head(title ='Guest')"></th:block>
<th:block th:replace="user/userfragments :: header"></th:block>
<th:block th:replace="user/userfragments :: navbar"></th:block>


<div id="store" style="
  background-color: white;
  width: 100%;
  padding: 20px;
  padding-bottom: 60px;  /* Added bottom padding */
  margin-bottom: 40px;   /* Added margin for footer */
  box-sizing: border-box;">
    <!-- store products -->
    <div class="row" style="
    display: flex;
    flex-wrap: wrap;
    margin: -8px;
    width: calc(100% + 16px);
    justify-content: center;  /* Changed to center */
    max-width: 1200px;       /* Added max-width */
    margin-left: auto;       /* Center the container */
    margin-right: auto;">
        <!-- product -->
        <div th:each="product : ${products}" class="col-md-3 col-xs-6" style="
      width: 240px;
      padding: 8px;
      box-sizing: border-box;
      flex-grow: 0;
      flex-shrink: 0;">
            <div class="product" style="
        position: relative;
        height: 100%;
        display: flex;
        flex-direction: column;
        -webkit-box-shadow: 0px 0px 0px 0px #E4E7ED, 0px 0px 0px 1px #E4E7ED;
        box-shadow: 0px 0px 0px 0px #E4E7ED, 0px 0px 0px 1px #E4E7ED;
        -webkit-transition: 0.2s all;
        transition: 0.2s all;">
                <div class="product-img" style="
          position: relative;
          width: 100%;
          padding-top: 75%;
          background-color: #fff;
          overflow: hidden;">
                    <img th:src="@{/images/products/{productImage}(productImage=${product.productImage})}" alt="Product Image" style="
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: auto;
            height: auto;
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;">
                    <div class="product-label" style="position: absolute; top: 10px; left: 10px; display: flex; gap: 5px;">
                        <span th:if="${product.discountPercentage > 0}" class="sale" style="background-color: #ff4757; color: white; padding: 5px 10px; border-radius: 5px; font-size: 12px;" th:text="'-' + ${product.discountPercentage} + '%'"></span>
                        <span th:if="${product.discountPercentage == null}" class="new" style="background-color: #2ed573; color: white; padding: 5px 10px; border-radius: 5px; font-size: 12px;">NEW</span>
                    </div>
                </div>
                <div class="product-body" style="padding: 15px; display: flex; flex-direction: column; flex-grow: 1;">
                    <p class="product-category" style="font-size: 14px; color: #888; margin: 0;" th:text="${product.category.name}">Category</p>
                    <h3 class="product-name" style="font-size: 16px; margin: 10px 0; flex-grow: 1;">
                        <a th:href="@{/product/{id}(id=${product.product_id})}" style="text-decoration: none; color: #333;" th:text="${product.name}">Product name goes here</a>
                    </h3>
                    <h4 class="product-price" style="font-size: 18px; color: #333; margin: 10px 0;">
                        <span th:text="${product.price - (product.price * product.discountPercentage / 100)}">$980.00</span>
                        <del th:if="${product.discountPercentage > 0}" style="font-size: 14px; color: #aaa;" th:text="${product.price}">$990.00</del>
                    </h4>
                    <div class="product-rating" style="color: #FFD700; margin-bottom: 10px;">
                        <i class="fa fa-star" th:each="i : ${#numbers.sequence(1, 5)}"
                           th:classappend="${i <= (product.ratings != null ? product.ratings.intValue() : 0) ? '' : '-o'}">
                        </i>
                    </div>

                    <div class="product-btns" style="display: flex; justify-content: space-around; padding: 10px 0;">
                        <button class="add-to-wishlist" style="background: none; border: none; cursor: pointer; padding: 5px;">
                            <i class="fa fa-heart-o"></i>
                            <span class="tooltipp" style="display: none;">add to wishlist</span>
                        </button>

                        <button class="add-to-cart-btn" style="background: none; border: none; cursor: pointer; padding: 5px;">
                            <i class="fa fa-shopping-cart"></i>
                            <span class="tooltipp" style="display: none;">add to cart</span>
                        </button>

                        <button class="quick-view" style="background: none; border: none; cursor: pointer; padding: 5px;" onclick="window.location.href='@{/product/view/{id}(id=${product.product_id})}'">
                            <i class="fa fa-eye"></i>
                            <span class="tooltipp" style="display: none;">quick view</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /product -->
    </div>
    <!-- /store products -->
</div>

<style>
    @media (max-width: 1200px) {
      .col-md-3 {
        width: 220px !important;
      }
    }

    @media (max-width: 991px) {
      .col-md-3 {
        width: calc(33.333% - 16px) !important;
      }
    }

    @media (max-width: 768px) {
      .col-md-3 {
        width: calc(50% - 16px) !important;
      }
    }

    @media (max-width: 480px) {
      .col-md-3 {
        width: calc(100% - 16px) !important;
      }
    }
</style>



<th:block th:replace="user/userfragments :: footer"></th:block>
<th:block th:replace="user/userfragments :: scripts"></th:block>

</body>
</html>